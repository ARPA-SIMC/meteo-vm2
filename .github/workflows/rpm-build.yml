name: RPM build

on:
  # Build only on pushes into master branch
  push:
    branches: [master]


jobs:
  # Set the job key. The key is displayed as the job name
  # when a job name is not provided
  rpm-build:
    name: RPM Build
    container: fedora:latest
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install tooling for source RPM build
        run: |
          dnf -y install @development-tools @rpm-development-tools copr-cli make

      - name: Build the source RPM
        run: |
          cd rpm && make srpm
